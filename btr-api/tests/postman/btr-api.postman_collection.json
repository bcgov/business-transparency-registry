{
	"info": {
		"_postman_id": "c041c574-d841-463f-a192-8c0b95a25554",
		"name": "btr-api",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "18245960",
		"_collection_link": "https://solar-spaceship-554441.postman.co/workspace/BaseApi~c3dcd8d9-dd08-48b8-bc11-94c7e12e1d47/collection/18245960-c041c574-d841-463f-a192-8c0b95a25554?action=share&source=collection_link&creator=18245960"
	},
	"item": [
		{
			"name": "authenticate",
			"item": [
				{
					"name": "authenticate",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"token\", jsonData.access_token);",
									"pm.environment.set(\"refresh_token\", jsonData.refresh_token);",
									"",
									"pm.environment.set(\"token_expires\", Date.now()+(jsonData.expires_in * 1000));",
									"pm.environment.set(\"refresh_token_expires\", Date.now()+(jsonData.refresh_expires_in * 1000));",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{client_id}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "{{client_secret}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "grant_type=client_credentials"
						},
						"url": {
							"raw": "{{kc_url}}/auth/realms/{{realm}}/protocol/openid-connect/token",
							"host": [
								"{{kc_url}}"
							],
							"path": [
								"auth",
								"realms",
								"{{realm}}",
								"protocol",
								"openid-connect",
								"token"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "ops",
			"item": [
				{
					"name": "healthz",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{internal_url}}/ops/healthz",
							"host": [
								"{{internal_url}}"
							],
							"path": [
								"ops",
								"healthz"
							]
						}
					},
					"response": []
				},
				{
					"name": "readyz",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{internal_url}}/ops/readyz",
							"host": [
								"{{internal_url}}"
							],
							"path": [
								"ops",
								"readyz"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "submission",
			"item": [
				{
					"name": "create",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"businessIdentifier\": \"string_value\",\n    \"effectiveDate\": \"2023-01-01\",\n    \"entityStatement\": {\n        \"statementID\": \"sampleID\",\n        \"statementType\": \"entityStatement\",\n        \"isComponent\": false,\n        \"entityType\": \"registeredEntity\",\n        \"name\": \"sample entity name\",\n        \"identifiers\": [\"1\"],\n        \"source\": {\n            \"source\": \"sample source\",\n            \"extractionDate\": \"YYYY-MM-DD\"\n        }\n    },\n    \"personStatements\": [\n        {\n            \"statementID\": \"sampleID\",\n            \"statementType\": \"personStatement\",\n            \"isComponent\": false,\n            \"personType\": \"knownPerson\",\n            \"names\": [\n                {\n                    \"fullName\": \"sample full name\"\n                }\n            ],\n            \"identifiers\": [\"1\"],\n            \"source\": {\n                \"url\": \"sample url\",\n                \"extractionDate\": \"YYYY-MM-DD\"\n            }\n        }\n    ],\n    \"ownershipOrControlStatements\": [\n        {\n            \"statementID\": \"sampleID\",\n            \"statementType\": \"ownershipOrControlStatement\",\n            \"isComponent\": false,\n            \"subject\": {\n                \"describedByEntityStatement\": \"sample entity statement\"\n            },\n            \"interestedParty\": {\n                \"describedByPersonStatement\": \"sample person statement\"\n            },\n            \"interests\": [\n                {\n                    \"type\": \"shareholding\",\n                    \"interestLevel\": \"unknown\",\n                    \"beneficialOwnershipOrControl\": true\n                }\n            ],\n            \"source\": {\n                \"url\": \"sample url\",\n                \"extractionDate\": \"YYYY-MM-DD\"\n            }\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{internal_url}}/plots",
							"host": [
								"{{internal_url}}"
							],
							"path": [
								"plots"
							]
						}
					},
					"response": []
				},
				{
					"name": "fetch",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"businessIdentifier\": \"BC0871427\",\n    \"effectiveDate\": \"2020-10-03\",\n    \"significantIndividuals\": [\n        {\n            \"percentOfShares\": \"20\",\n            \"percentOfVotes\": \"10\",\n            \"controlType\": {\n                \"sharesVotes\": {\n                    \"registeredOwner\": true,\n                    \"beneficialOwner\": false,\n                    \"indirectControl\": false,\n                    \"inConcertControl\": true\n                },\n                \"directors\": {\n                    \"directControl\": true,\n                    \"indirectControl\": true,\n                    \"significantInfluence\": false,\n                    \"inConcertControl\": true\n                },\n                \"other\": \"\"\n            },\n            \"missingInfoReason\": null,\n            \"startDate\": \"2020-04-21\",\n            \"action\": \"add\",\n            \"profile\": {\n                \"fullName\": \"John Smith\",\n                \"preferredName\": \"John\",\n                \"email\": \"123@test.com\",\n                \"address\": {\n                    \"country\": { \"name\": \"Canada\", \"alpha_2\": \"CA\" },\n                    \"line1\": \"111 test street\",\n                    \"line2\": null,\n                    \"city\": \"Vancouver\",\n                    \"region\": \"BC\",\n                    \"postalCode\": \"V0E 1H5\"\n                },\n                \"competency\": {\n                    \"decisionMaking\": true,\n                    \"financialAffairs\": true\n                },\n                \"birthDate\": \"2000-03-19\",\n                \"citizenshipCA\": \"citizen\",\n                \"citizenshipsExCA\": [],\n                \"isTaxResident\": true,\n                \"hasTaxNumber\": true,\n                \"taxNumber\": \"000 000 000\"\n            }\n        }\n    ]\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{internal_url}}/plots",
							"host": [
								"{{internal_url}}"
							],
							"path": [
								"plots"
							]
						}
					},
					"response": []
				},
				{
					"name": "get latest for entity",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"businessIdentifier\": \"BC0871427\",\n    \"effectiveDate\": \"2020-10-03\",\n    \"significantIndividuals\": [\n        {\n            \"percentOfShares\": \"20\",\n            \"percentOfVotes\": \"10\",\n            \"controlType\": {\n                \"sharesVotes\": {\n                    \"registeredOwner\": true,\n                    \"beneficialOwner\": false,\n                    \"indirectControl\": false,\n                    \"inConcertControl\": true\n                },\n                \"directors\": {\n                    \"directControl\": true,\n                    \"indirectControl\": true,\n                    \"significantInfluence\": false,\n                    \"inConcertControl\": true\n                },\n                \"other\": \"\"\n            },\n            \"missingInfoReason\": null,\n            \"startDate\": \"2020-04-21\",\n            \"action\": \"add\",\n            \"profile\": {\n                \"fullName\": \"John Smith\",\n                \"preferredName\": \"John\",\n                \"email\": \"123@test.com\",\n                \"address\": {\n                    \"country\": { \"name\": \"Canada\", \"alpha_2\": \"CA\" },\n                    \"line1\": \"111 test street\",\n                    \"line2\": null,\n                    \"city\": \"Vancouver\",\n                    \"region\": \"BC\",\n                    \"postalCode\": \"V0E 1H5\"\n                },\n                \"competency\": {\n                    \"decisionMaking\": true,\n                    \"financialAffairs\": true\n                },\n                \"birthDate\": \"2000-03-19\",\n                \"citizenshipCA\": \"citizen\",\n                \"citizenshipsExCA\": [],\n                \"isTaxResident\": true,\n                \"hasTaxNumber\": true,\n                \"taxNumber\": \"000 000 000\"\n            }\n        }\n    ]\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{internal_url}}/plots",
							"host": [
								"{{internal_url}}"
							],
							"path": [
								"plots"
							]
						}
					},
					"response": []
				}
			]
		}
	]
}